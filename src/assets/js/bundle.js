!function(e){var t={};function i(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)i.d(n,l,function(t){return e[t]}.bind(null,l));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./dist/",i(i.s=2)}([
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},
/*!********************************!*\
  !*** ./src/builder.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./builder.ts */8)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*****************************!*\
  !*** ./src/main.ts-exposed ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./main.ts */3)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************!*\
  !*** ./node_modules/ts-loader!./src/main.ts ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiumForm=void 0;const n=i(/*! ./section */4),l=i(/*! ./builder */1),s=i(/*! ./data.json */20);t.PixiumForm=class{constructor(e){if(this.sections=[],this.currentNode=0,e.div){if(this.div=e.div,this.mainNode=document.getElementById(this.div),console.log(this.mainNode),this.mainNode.setAttribute("class","container form-container"),e.data?this.json=e.data:this.json=s,this.json&&this.json.sections){this.json.sections.forEach(e=>{let t=new n.Section(this.mainNode,e,e=>this.moveSection(e));this.sections.push(t)})}else alert("Could not init the module."),console.log(this.json);e.debug?this.debug=e.debug:this.debug=!1,e.mode?this.mode=e.mode:this.mode="run","build"===this.mode?this.build():this.run()}else alert("Div not found. Cannot display the form")}build(){this.clear(),this.sections.forEach(e=>{e.build(this.mainNode);let t=l.Builder.createElement("button",{class:"btn btn-danger pixium-btn",type:"button",id:"btn-delete-section-"+e.id});t.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',t.onclick=t=>{this.mainNode.removeChild(e.node),this.sections=this.sections.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)});let e=l.Builder.createElement("button",{class:"btn btn-success pixium-btn",type:"button"});e.innerText="+",e.onclick=e=>{let i=e.target,s=new n.Section(this.mainNode,null,e=>this.moveSection(e));this.sections.push(s),this.mainNode.removeChild(i),this.debug&&this.mainNode.removeChild(t),s.build(this.mainNode);let o=l.Builder.createElement("button",{class:"btn btn-danger pixium-btn",type:"button",id:"btn-delete-section-"+s.id});o.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',o.onclick=e=>{this.mainNode.removeChild(s.node),this.sections=this.sections.filter((function(e){return e.id!=s.id}))},s.node.appendChild(o),this.mainNode.appendChild(i),this.debug&&this.mainNode.appendChild(t)},this.mainNode.appendChild(e);let t=l.Builder.createElement("button",{class:"btn btn-primary pixium-btn",type:"button"});t.innerText="GO TO RUN",t.onclick=()=>{this.run()},this.debug&&this.mainNode.appendChild(t)}run(){if(this.clear(),this.sections.forEach(e=>{e.run(this.mainNode)}),this.currentNode==this.sections.length-1){document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none";let e=l.Builder.createElement("button",{class:"btn btn-success pixium-btn",type:"submit",id:"form-builder-save-final-btn"});e.innerText="SAVE",e.onclick=e=>{this.sections[this.currentNode].isCompleted()?this.compileJson():(e.preventDefault(),alert("Form has not been fully completed yet. Please proceed"))},document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(e)}let e=l.Builder.createElement("button",{class:"btn btn-success pixium-btn",type:"button",id:"form-builder-save-btn"});e.innerText="SAVE",e.onclick=()=>{this.compileJson()},this.debug&&this.mainNode.appendChild(e);let t=l.Builder.createElement("button",{class:"btn btn-primary pixium-btn",type:"button"});t.innerText="GO TO BUILD MODE",t.onclick=()=>{this.build()},this.debug&&this.mainNode.appendChild(t),this.display()}result(){}clear(){this.mainNode&&(this.mainNode.innerHTML="",this.sections.forEach(e=>{e.clear()}),this.currentNode=0)}display(){this.currentNode>=0&&this.currentNode<this.sections.length&&this.sections[this.currentNode].show()}compileJson(){let e;e=[],this.sections.forEach(t=>{e.push(t.compileJson())});let t=JSON.stringify({sections:e});return console.log("finalOutput"),console.log(t),t}moveSection(e){if(e)if(this.currentNode>=0&&this.currentNode<this.sections.length-1)if(this.sections[this.currentNode].hide(),this.currentNode++,this.sections[this.currentNode].show(),document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="block",this.currentNode==this.sections.length-1){document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none";let e=l.Builder.createElement("button",{class:"btn btn-success pixium-btn",type:"submit",id:"form-builder-save-final-btn"});e.innerText="SAVE",e.onclick=e=>{this.sections[this.currentNode].isCompleted()?this.compileJson():(e.preventDefault(),alert("Form has not been fully completed yet. Please proceed"))},document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(e)}else document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="block";else alert("You already are on the next slide");else this.currentNode>=1&&this.currentNode<this.sections.length?(this.sections[this.currentNode].hide(),this.currentNode--,this.sections[this.currentNode].show(),document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="block",0==this.currentNode&&(document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="none")):alert("You already are on the first slide")}}},
/*!********************************!*\
  !*** ./src/section.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./section.ts */5)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/section.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Section=void 0;const n=i(/*! ./block/block */6),l=i(/*! ./builder */1);t.Section=class{constructor(e,t,i){this.parent=e,this.blocks=[],this.callback=i,this.title="Default Title",this.name="default_name",this.id=Math.random().toString(36).substring(7),t&&(t.title&&(this.title=t.title),t.name&&(this.name=t.name),t.blocks&&t.blocks.forEach(e=>{let t=new n.Block(e);this.blocks.push(t)}))}build(e){this.node=l.Builder.createElement("div",{class:"row pixium-box"});let t=l.Builder.createElement("div",{class:"row pixium-block-build pixium-block-build-header"});l.Builder.addBuilderInputText(t,this.id,this.title,"Title Section",e=>{this.title=e},"col-md-4"),l.Builder.addBuilderInputText(t,this.id,this.name,"Name Section",e=>{this.name=e},"col-md-4"),this.node.appendChild(t),this.blocks.forEach(e=>{e.build(this.node);let t=l.Builder.createElement("button",{class:"btn btn-danger pixium-btn",type:"button"});t.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',t.onclick=t=>{this.node.removeChild(e.node),this.blocks=this.blocks.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)});let i=l.Builder.createElement("button",{class:"btn btn-success pixium-btn",type:"button"});i.innerHTML="+",i.onclick=e=>{let t=e.target,i=new n.Block(null);this.blocks.push(i),this.node.removeChild(t);let s=document.getElementById("btn-delete-section-"+this.id);this.node.removeChild(s),i.build(this.node);let o=l.Builder.createElement("button",{class:"btn btn-danger pixium-btn",type:"button"});o.innerText='<i class="fa fa-trash" aria-hidden="true"></i>',o.onclick=e=>{this.node.removeChild(i.node),this.blocks=this.blocks.filter((function(e){return e.id!=i.id}))},i.node.appendChild(o),this.node.appendChild(t),this.node.appendChild(s)},this.node.appendChild(i),e.appendChild(this.node)}run(e){this.node=l.Builder.createElement("div",{class:"row pixium-box"});let t=document.createElement("h1");t.innerHTML=this.title;let i=document.createElement("hr");this.node.appendChild(t),this.node.appendChild(i),this.blocks.forEach(e=>{e.run(this.node)});let n=l.Builder.createElement("button",{class:"btn btn-info pixium-btn",id:"btn-previous-section-"+this.id,type:"button"});n.innerText="Previous",n.style.display="none",n.onclick=()=>{this.callback&&this.callback(!1)},this.node.appendChild(n);let s=l.Builder.createElement("button",{class:"btn btn-info pixium-btn",id:"btn-next-section-"+this.id,type:"button"});s.innerText="Next",s.onclick=()=>{this.isCompleted()?this.callback&&this.callback(!0):alert("Form has not been fully completed yet. Please proceed")},this.node.appendChild(s),this.node.style.display="none",e.appendChild(this.node)}clear(){this.node&&(this.node.innerHTML=""),this.blocks.forEach(e=>{e.clear()})}getNode(){return alert(this.node),this.node}show(){this.node.style.display="block"}hide(){this.node.style.display="none"}isCompleted(){let e=!0;return this.blocks.forEach(t=>{t&&!t.answer&&t.type!==n.BlockType.NOANSWER&&(e=!1)}),e}compileJson(){let e;return e=[],this.blocks.forEach(t=>{e.push(t.compileJson())}),{title:this.title,name:this.name,blocks:e}}}},
/*!************************************!*\
  !*** ./src/block/block.ts-exposed ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./block.ts */7)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*****************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/block.ts ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=t.BlockType=void 0;const n=i(/*! ../builder */1),l=i(/*! ./choice */9),s=i(/*! ./blockSlider */11),o=i(/*! ./blockFreetext */13),d=i(/*! ./blockRadio */15),r=i(/*! ./blockCheckbox */17),c=i(/*! ./blockLongtext */21);var a;!function(e){e[e.FREETEXT=1]="FREETEXT",e[e.RADIO=2]="RADIO",e[e.SLIDER=3]="SLIDER",e[e.CHECKBOX=4]="CHECKBOX",e[e.LONGTEXT=5]="LONGTEXT",e[e.NOANSWER=6]="NOANSWER"}(a=t.BlockType||(t.BlockType={}));t.Block=class{constructor(e=null){this.json=e,this.text="",this.type=1,this.min="",this.max="",this.step="",this.answer="",this.name="",this.choices=[],this.id=Math.random().toString(36).substring(7),e&&(e.text&&(this.text=e.text),e.type&&(this.type=e.type),this.answer="",e.answer&&(this.answer=e.answer),e.name&&(this.name=e.name),e.min&&(this.min=e.min),e.max&&(this.max=e.max),e.step&&(this.step=e.step),this.type!==a.RADIO&&this.type!==a.CHECKBOX||e.choices&&e.choices.forEach(e=>{let t=new l.Choice(e);this.choices.push(t)}))}clear(){this.node&&(this.node.innerHTML="")}build(e){this.node=n.Builder.createElement("div",{class:"row pixium-block-build"});let t=n.Builder.createElement("hr",{class:"pixium-hr col-md-12"});n.Builder.addBuilderInputText(this.node,this.id,this.text,"Text",e=>{this.text=e},"col-md-4"),n.Builder.addBuilderInputText(this.node,this.id,this.name,"Name",e=>{this.name=e},"col-md-4");let i=Object.keys(a).filter(e=>e.match(/^\D/)).map(e=>({name:e,value:a[e]}));n.Builder.addBuilderInputDropdown(this.node,this.id,this.type,"Type",e=>{this.type=Number(e),this.answer="",this.triggerSubElementBlock()},i,"col-md-4");let s="";this.type!==a.RADIO&&this.type!==a.CHECKBOX&&(s="display:none;");let o=n.Builder.createElement("div",{id:"choices_block_"+this.id,class:"row col-md-12",style:s}),d=n.Builder.createElement("label");d.innerHTML="Choices : ",o.appendChild(d),this.choices.length>0&&this.choices.forEach(e=>{e.build(o);let t=n.Builder.createElement("button",{class:"btn btn-danger pixium-btn",type:"button"});t.innerText="-",t.onclick=t=>{o.removeChild(e.node),this.choices=this.choices.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)});let r=n.Builder.createElement("button",{class:"btn btn-success pixium-btn",type:"button"});r.innerText="+",r.onclick=e=>{let t=e.target,i=new l.Choice(null);this.choices.push(i),o.removeChild(t),i.build(o);let s=n.Builder.createElement("button",{class:"btn btn-danger pixium-btn",type:"button"});s.innerText="-",s.onclick=e=>{o.removeChild(i.node),this.choices=this.choices.filter((function(e){return e.id!=i.id}))},i.node.appendChild(s),o.appendChild(t)},o.appendChild(r),this.node.appendChild(o);let c="";this.type!==a.SLIDER&&(c="display:none;");let u=n.Builder.createElement("div",{id:"slider_block_"+this.id,class:"row col-md-12",style:c});n.Builder.addBuilderInputText(u,this.id,this.min,"Min",e=>{this.min=e},"col-md-4"),n.Builder.addBuilderInputText(u,this.id,this.max,"Max",e=>{this.max=e},"col-md-4"),n.Builder.addBuilderInputText(u,this.id,this.step,"Step",e=>{this.step=e},"col-md-4"),this.node.appendChild(u),this.node.appendChild(t),e.appendChild(this.node)}run(e){let t=n.Builder.createElement("p");switch(t.innerHTML=this.text,this.node=n.Builder.createElement("div"),this.node.appendChild(t),this.type){case a.RADIO:d.BlockRadio.run(this.node,this);break;case a.CHECKBOX:r.BlockCheckbox.run(this.node,this);break;case a.FREETEXT:o.BlockFreetext.run(this.node,this);break;case a.LONGTEXT:c.BlockLongtext.run(this.node,this);break;case a.NOANSWER:break;case a.SLIDER:s.BlockSlider.run(this.node,this)}let i=n.Builder.createElement("hr",{class:"pixium-hr"});this.node.appendChild(i),e.appendChild(this.node)}display(){}triggerSubElementBlock(){let e=null;(e=document.getElementById("slider_block_"+this.id))?this.type===a.SLIDER?e.style.display="block":e.style.display="none":alert("Node Silder not found");let t=null;(t=document.getElementById("choices_block_"+this.id))?this.type===a.RADIO||this.type===a.CHECKBOX?t.style.display="block":t.style.display="none":alert("Node Choice not found")}compileJson(){let e;return e=[],this.choices.forEach(t=>{e.push(t.compileJson())}),this.json={type:this.type,text:this.text,answer:this.answer,name:this.name,min:this.min,max:this.max,step:this.step,choices:e},this.json}}},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/builder.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Builder=void 0;class n{static createElement(e,t=null){if(!e)return void alert("Could not build the element");let i=document.createElement(e);if(t)for(var n in t){var l=t[n];i.setAttribute(n,l)}return i}static setAttributes(e,t=null){if(t)for(var i in t){var n=t[i];e.setAttribute(i,n)}}static addBuilderInputText(e,t,i,l,s,o="col-md-12"){let d=n.createElement("div",{class:"pixium-row-block "+o}),r=n.createElement("label");r.innerHTML=l+": ";let c=n.createElement("input",{class:"pixium-textbox",type:"text",value:i,name:l+"_"+t,style:"color:Red",placeholder:l});c.onblur=e=>{console.log(e.target),s(e.target.value)},d.appendChild(r),d.appendChild(c),e.appendChild(d)}static addBuilderInputDropdown(e,t,i,l,s,o,d="col-md-12"){let r=n.createElement("div",{class:"pixium-row-block "+d}),c=n.createElement("label");c.innerHTML=l+": ";let a=n.createElement("select",{class:"pixium-dropdown",value:i,name:l+"_"+t,style:"display:block"});a.onchange=e=>{s(e.target.value)},o.forEach(e=>{let t=n.createElement("option",{value:e.value});i===e.value&&n.setAttributes(t,{selected:"selected"}),t.innerHTML=e.name,a.appendChild(t)}),r.appendChild(c),r.appendChild(a),e.appendChild(r)}}t.Builder=n},
/*!*************************************!*\
  !*** ./src/block/choice.ts-exposed ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./choice.ts */10)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!******************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/choice.ts ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Choice=void 0;const n=i(/*! ../builder */1);t.Choice=class{constructor(e){this.id=Math.random().toString(36).substring(7),e&&(e.label&&(this.label=e.label),e.value&&(this.value=e.value))}build(e){this.node=n.Builder.createElement("div",{class:"pixium-row-block block-choices col-md-12"});let t=n.Builder.createElement("label",{for:"input_"+this.value+"_"+this.id});t.innerHTML="Value : ";let i=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.value,id:"input_"+this.value+"_"+this.id,style:"color:Red;"});i.onblur=e=>{console.log(e.target),this.value=e.target.value};let l=n.Builder.createElement("label",{for:"input_"+this.label+"_"+this.id,style:"min-width: auto;"});l.innerHTML="Label : ";let s=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.label,id:"input_"+this.label+"_"+this.id,style:"color:Red;"});s.onblur=e=>{console.log(e.target),this.label=e.target.value},this.node.appendChild(t),this.node.appendChild(i),this.node.appendChild(l),this.node.appendChild(s),e.appendChild(this.node)}compileJson(){return this.json={label:this.label,value:this.value},this.json}}},
/*!******************************************!*\
  !*** ./src/block/blockSlider.ts-exposed ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockSlider.ts */12)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!***********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockSlider.ts ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSlider=void 0;const n=i(/*! ../builder */1);t.BlockSlider=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=document.createElement("input"),s=n.Builder.createElement("span",{class:"_left"});s.innerHTML=t.min;let o=n.Builder.createElement("span",{class:"_right"});o.innerHTML=t.max,n.Builder.setAttributes(l,{class:"pixium-slider",type:"range",value:t.answer,min:t.min,max:t.max,name:t.name,id:"inputrange_"+t.name}),t.step&&l.setAttribute("step",t.step),l.onchange=()=>{t.answer=parseFloat(l.value),console.log(l);document.getElementById("output_"+t.name).innerHTML=t.answer};let d=n.Builder.createElement("div");d.setAttribute("class","pixium-block-slider");let r=n.Builder.createElement("output",{id:"output_"+t.name});r.innerHTML=t.answer,d.appendChild(r),d.appendChild(l),d.appendChild(s),d.appendChild(o),i.appendChild(d),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockFreetext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockFreetext.ts */14)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockFreetext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockFreetext=void 0;const n=i(/*! ../builder */1);t.BlockFreetext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=document.createElement("input");n.Builder.setAttributes(l,{class:"pixium-textbox",type:"text",value:t.answer,name:this.name,style:"color:Red"}),l.onblur=()=>{t.answer=l.value,console.log(t.answer)},i.appendChild(l),e.appendChild(i)}}},
/*!*****************************************!*\
  !*** ./src/block/blockRadio.ts-exposed ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockRadio.ts */16)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockRadio.ts ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockRadio=void 0;const n=i(/*! ../builder */1);t.BlockRadio=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let l=n.Builder.createElement("input",{type:"radio",name:t.name,value:e.value+""}),s=n.Builder.createElement("label");s.innerHTML=e.label;let o=n.Builder.createElement("div");o.appendChild(l),o.appendChild(s),i.appendChild(o),l.onclick=e=>{console.log(e.target),t.answer=e.target.value,console.log(t.answer)}}),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockCheckbox.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockCheckbox.ts */18)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockCheckbox.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockCheckbox=void 0;const n=i(/*! ../builder */1);t.BlockCheckbox=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let l=n.Builder.createElement("input",{type:"checkbox",name:t.name,value:e.value+"",id:e.value+""});for(var s=0;s<t.answer.length;s++)e.value+""===t.answer[s]&&n.Builder.setAttributes(l,{checked:!0});let o=n.Builder.createElement("label");o.innerHTML=e.label;let d=n.Builder.createElement("div");d.appendChild(l),d.appendChild(o),i.appendChild(d),l.onclick=e=>{let i=document.querySelectorAll('input[type=checkbox][name="'+t.name+'"]:checked'),n=[];i.forEach(e=>{n.push(e.value)}),t.answer=n}}),e.appendChild(i)}}},
/*!***********************!*\
  !*** ./src/data.json ***!
  \***********************/
/*! exports provided: sections, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */,function(e){e.exports=JSON.parse('{"sections":[{"title":"Section 1","name":"S1","blocks":[{"text":"BLABLA: <br> <br> How BLALBAty to delegate?","name":"q3","type":3,"min":"1","max":"100","step":"1","answer":"1","label":"Delegation"},{"text":"Test Ludo?","name":"q3bis","type":3,"min":"1","max":"10","step":"1","answer":"1","label":"Delegation"}]},{"name":"Block Test Checkbox","blocks":[{"type":2,"name":"q2","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"Extraverted"},{"value":2,"label":"Introverted"}]},{"type":4,"name":"q22","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"I love meeting new people!"},{"value":2,"label":"Sometimes I like to meet new people, if I\'m in the right mood."}]}]},{"name":"block 1","blocks":[{"text":"DDDDELEGATION: <br> <br> How skilled do you feel today about your ability to delegate?","name":"q1","type":1,"group":1,"label":"Delegation"},{"text":"TEST: <br> <br> How sity to delegate?","name":"q2","type":1,"group":1,"label":"Delegation"}]}]}')},
/*!********************************************!*\
  !*** ./src/block/blockLongtext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockLongtext.ts */22)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockLongtext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockLongtext=void 0;const n=i(/*! ../builder */1);t.BlockLongtext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=document.createElement("textarea");n.Builder.setAttributes(l,{class:"pixium-textbox",rows:5,value:t.answer,name:this.name,style:"color:Red"}),l.onblur=()=>{t.answer=l.value,console.log(t.answer)},i.appendChild(l),e.appendChild(i)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVpbGRlci50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlY3Rpb24udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvc2VjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2J1aWxkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Nob2ljZS50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9jaG9pY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0ZyZWV0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrRnJlZXRleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrUmFkaW8udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tSYWRpby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tDaGVja2JveC50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0NoZWNrYm94LnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0xvbmd0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrTG9uZ3RleHQudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsImRhdGEiLCJwYXJhbXMiLCJzZWN0aW9ucyIsImN1cnJlbnROb2RlIiwiZGl2IiwibWFpbk5vZGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY29uc29sZSIsImxvZyIsInNldEF0dHJpYnV0ZSIsImpzb24iLCJmb3JFYWNoIiwic2VjIiwic2VjdGlvbk1vZGVsIiwiU2VjdGlvbiIsIm5leHRTbGlkZSIsIm1vdmVTZWN0aW9uIiwicHVzaCIsImFsZXJ0IiwiZGVidWciLCJidWlsZCIsInJ1biIsImNsZWFyIiwiZGVsQnRuIiwiQnVpbGRlciIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImlubmVySFRNTCIsIm9uY2xpY2siLCJldiIsInJlbW92ZUNoaWxkIiwibm9kZSIsImZpbHRlciIsImVsIiwiYXBwZW5kQ2hpbGQiLCJhZGRCdXR0b24iLCJpbm5lclRleHQiLCJidG5TZWNBZGQiLCJ0YXJnZXQiLCJzd2l0Y2hCdXR0b24iLCJidG5TZWNEZWwiLCJsZW5ndGgiLCJzdHlsZSIsImRpc3BsYXkiLCJzYXZlQnRuIiwiaXNDb21wbGV0ZWQiLCJjb21waWxlSnNvbiIsInByZXZlbnREZWZhdWx0IiwiYWZ0ZXIiLCJzYXZlQnV0dG9uIiwic2hvdyIsImFyciIsImZpbmFsT3V0cHV0IiwiSlNPTiIsInN0cmluZ2lmeSIsImhpZGUiLCJfcGFyZW50IiwiX2pzb24iLCJfY2FsbGJhY2siLCJwYXJlbnQiLCJibG9ja3MiLCJjYWxsYmFjayIsInRpdGxlIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiYiIsImJsb2NrTW9kZWwiLCJCbG9jayIsIm5vZGVIZWFkZXIiLCJhZGRCdWlsZGVySW5wdXRUZXh0IiwidmFsIiwiYmxrIiwiYnRuQmxrQWRkIiwiYnRuQmxrRGVsIiwibmFtZU5vZGUiLCJock5hbWUiLCJwcmV2QnV0dG9uIiwibmV4dEJ1dHRvbiIsImFuc3dlciIsInR5cGUiLCJCbG9ja1R5cGUiLCJOT0FOU1dFUiIsInRleHQiLCJtaW4iLCJtYXgiLCJzdGVwIiwiY2hvaWNlcyIsIlJBRElPIiwiQ0hFQ0tCT1giLCJjaG9pY2VKc29uIiwiY2hvaWNlIiwiQ2hvaWNlIiwiaHIiLCJlbnVtQXJyYXkiLCJrZXlzIiwiYSIsIm1hdGNoIiwibWFwIiwiYWRkQnVpbGRlcklucHV0RHJvcGRvd24iLCJOdW1iZXIiLCJ0cmlnZ2VyU3ViRWxlbWVudEJsb2NrIiwiYmxrQ2hvaWNlc1N0eWxlIiwibm9kZUNob2ljZXMiLCJsYWJUaXRsZSIsImNoIiwiYWRkQ2hvaWNlQnV0dG9uIiwiYnRuQ2hBZGQiLCJidG5DaERlbCIsImJsa1NsaWRlclN0eWxlIiwiU0xJREVSIiwibm9kZVNsaWRlciIsInRpdGxlTm9kZSIsIkJsb2NrUmFkaW8iLCJCbG9ja0NoZWNrYm94IiwiRlJFRVRFWFQiLCJCbG9ja0ZyZWV0ZXh0IiwiTE9OR1RFWFQiLCJCbG9ja0xvbmd0ZXh0IiwiQmxvY2tTbGlkZXIiLCJzbGlkZXJCbG9jayIsImNob2ljZUJsb2NrIiwiX3BhcmFtcyIsImVsZW0iLCJsYWJlbCIsImNsYXNzZXMiLCJsYWIiLCJpbnB1dCIsIm9uYmx1ciIsIm9wdGlvbnMiLCJvbmNoYW5nZSIsImVsZW1lbnQiLCJvcHQiLCJzZXRBdHRyaWJ1dGVzIiwibGFiVmFsdWUiLCJpbnB1dFZhbHVlIiwibGFiTGFiZWwiLCJpbnB1dExhYmVsIiwiYmxvY2siLCJob2xkZXIiLCJmaWVsZCIsInBhcnNlRmxvYXQiLCJpbnB1dERpdiIsIm91dHB1dCIsImYiLCJfZGl2IiwiY2hlY2tlZEJveGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImlkcyJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVB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SSxFQUFReEksU0FBU29CLGNBQWMsWUFHbkMsRUFBQUQsUUFBUThHLGNBQWNPLEVBQU8sQ0FDekIsTUFBUyxpQkFDVCxLQUFRLEVBQ1IsTUFBU0YsRUFBTTNELE9BQ2YsS0FBUXJGLEtBQUsxQixLQUNiLE1BQVMsY0FHYjRLLEVBQU1aLE9BQVMsS0FDWFUsRUFBTTNELE9BQStCNkQsRUFBT2xLLE1BQzVDNEIsUUFBUUMsSUFBSW1JLEVBQU0zRCxTQUV0QjRELEVBQU8xRyxZQUFZMkcsR0FDbkI5RyxFQUFLRyxZQUFZMEciLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIuL2Rpc3QvXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbiIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2J1aWxkZXIudHNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3BpeGl1bWRpZ2l0YWwvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vbWFpbi50c1wiKTsiLCJcbmltcG9ydCB7U2VjdGlvbn0gZnJvbSAnLi9zZWN0aW9uJztcbmltcG9ydCB7QnVpbGRlcn0gZnJvbSAnLi9idWlsZGVyJztcbi8vIGltcG9ydCAqIGFzIGRhdGEgZnJvbSAnLi9kYXRhLmpzb24nO1xuXG4vLyBpbXBvcnQgQ2hhcnQgZnJvbSAnY2hhcnRqcyc7XG5cbmltcG9ydCB7c29ydGFibGV9IGZyb20gJ2h0bWw1c29ydGFibGUnO1xuLy8gaW1wb3J0IGZvbnRhd2Vzb21lIGZyb20gJ0Bmb3J0YXdlc29tZS9mb250YXdlc29tZS1mcmVlJztcblxuY29uc3QgZGF0YSA9IHJlcXVpcmUoJy4vZGF0YS5qc29uJyk7XG4vLyBjb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuZXhwb3J0IGNsYXNzIFBpeGl1bUZvcm0ge1xuICAgIGpzb246Rm9ybURhdGE7XG4gICAgZGl2OnN0cmluZztcbiAgICBzZWN0aW9uczpTZWN0aW9uW107XG4gICAgb3V0cHV0OiBzdHJpbmc7XG4gICAgbWFpbk5vZGU6IEhUTUxFbGVtZW50O1xuICAgIHRpdGxlTm9kZTogSFRNTEVsZW1lbnQ7XG4gICAgY3VycmVudE5vZGU6IG51bWJlcjtcbiAgICBtb2RlOnN0cmluZztcbiAgICBkZWJ1Zzpib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IocGFyYW1zOkZvcm1EYXRhKSB7XG4gICAgICAgIHRoaXMuc2VjdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IDA7XG5cbiAgICAgICAgaWYoIXBhcmFtc1tcImRpdlwiXSl7XG4gICAgICAgICAgICBhbGVydCgnRGl2IG5vdCBmb3VuZC4gQ2Fubm90IGRpc3BsYXkgdGhlIGZvcm0nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpdiA9IHBhcmFtc1tcImRpdlwiXTtcbiAgICAgICAgdGhpcy5tYWluTm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGl2KTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5tYWluTm9kZSk7XG4gICAgICAgIHRoaXMubWFpbk5vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjb250YWluZXIgZm9ybS1jb250YWluZXJcIik7XG5cbiAgICAgICAgaWYocGFyYW1zW1wiZGF0YVwiXSl7XG4gICAgICAgICAgICB0aGlzLmpzb24gPSBwYXJhbXNbXCJkYXRhXCJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5qc29uID0gZGF0YTsvL0pTT04ucGFyc2UoIGRhdGEgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJVSUxEIHRoZSBzZWN0aW9uIHN1YiBlbGVtZW50IChubyBnZW5lcmF0ZWQgSFRNTCBhdCB0aGlzIHN0YWdlIHlldClcbiAgICAgICAgaWYodGhpcy5qc29uICYmIHRoaXMuanNvbltcInNlY3Rpb25zXCJdKXtcbiAgICAgICAgICAgIGxldCBzZWNzID0gdGhpcy5qc29uW1wic2VjdGlvbnNcIl07XG4gICAgICAgICAgICBzZWNzLmZvckVhY2goIChzZWMpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgc2VjdGlvbk1vZGVsID0gbmV3IFNlY3Rpb24odGhpcy5tYWluTm9kZSwgc2VjLCAoIChuZXh0U2xpZGU6Ym9vbGVhbikgPT50aGlzLm1vdmVTZWN0aW9uKG5leHRTbGlkZSkgKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9ucy5wdXNoKHNlY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICB9KTsgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGFsZXJ0KFwiQ291bGQgbm90IGluaXQgdGhlIG1vZHVsZS5cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmpzb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gIC0tLS0tLS0tLS0tLSAgICBTVEFSVCBUSEUgQVBQTElDQVRJT04gSU4gZGVidWdcbiAgICAgICAgIGlmKHBhcmFtc1tcImRlYnVnXCJdKXtcbiAgICAgICAgICAgIHRoaXMuZGVidWcgPSBwYXJhbXNbXCJkZWJ1Z1wiXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGVidWcgPSBmYWxzZTtcbiAgICAgICAgfSAgICAgICBcblxuICAgICAgICAvLyAgLS0tLS0tLS0tLS0tICAgIFNUQVJUIFRIRSBBUFBMSUNBVElPTiBJTiBidWlsZCBPUiBydW4gTU9ERVxuICAgICAgICBpZihwYXJhbXNbXCJtb2RlXCJdKXtcbiAgICAgICAgICAgIHRoaXMubW9kZSA9IHBhcmFtc1tcIm1vZGVcIl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1vZGUgPSAncnVuJztcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLm1vZGUgPT09ICdidWlsZCcpe1xuICAgICAgICAgICAgdGhpcy5idWlsZCgpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRoaXMucnVuKCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEVudGVyIEJVSUxEIE1PREUgZm9yIHVzZXIgdG8gZWRpdCB0aGUgZm9ybVxuICAgICAqL1xuICAgIGJ1aWxkKCl7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcblxuICAgICAgICB0aGlzLnNlY3Rpb25zLmZvckVhY2goIChzZWMpID0+IHtcbiAgICAgICAgICAgIHNlYy5idWlsZCh0aGlzLm1haW5Ob2RlKTtcbiAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBTRUNUSU9OIEJUTlxuICAgICAgICAgICAgbGV0IGRlbEJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgcGl4aXVtLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcImlkXCI6XCJidG4tZGVsZXRlLXNlY3Rpb24tXCIrc2VjLmlkfSk7XG4gICAgICAgICAgICBkZWxCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEgZmEtdHJhc2hcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JzsgIFxuICAgICAgICAgICAgZGVsQnRuLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUucmVtb3ZlQ2hpbGQoc2VjLm5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMgPSB0aGlzLnNlY3Rpb25zLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gc2VjLmlkOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2VjLm5vZGUuYXBwZW5kQ2hpbGQoZGVsQnRuKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIEJVSUxEIEFERCBTRUNUSU9OIEJUTlxuICAgICAgICBsZXQgYWRkQnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1zdWNjZXNzIHBpeGl1bS1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pOyAgXG4gICAgICAgIGFkZEJ1dHRvbi5pbm5lclRleHQgPSAnKyc7ICBcbiAgICAgICAgYWRkQnV0dG9uLm9uY2xpY2sgPSAoZXYpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICBsZXQgYnRuU2VjQWRkID0gPEhUTUxFbGVtZW50PmV2LnRhcmdldDtcbiAgICAgICAgICAgIGxldCBzZWMgPSBuZXcgU2VjdGlvbih0aGlzLm1haW5Ob2RlLCBudWxsLCAoIChuZXh0U2xpZGU6Ym9vbGVhbikgPT50aGlzLm1vdmVTZWN0aW9uKG5leHRTbGlkZSkgKSk7XG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25zLnB1c2goc2VjKTtcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUucmVtb3ZlQ2hpbGQoYnRuU2VjQWRkKTtcbiAgICAgICAgICAgIGlmKHRoaXMuZGVidWcpe1xuICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUucmVtb3ZlQ2hpbGQoc3dpdGNoQnV0dG9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlYy5idWlsZCh0aGlzLm1haW5Ob2RlKTtcbiAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBTRUNUSU9OIEJUTlxuICAgICAgICAgICAgbGV0IGJ0blNlY0RlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgcGl4aXVtLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcImlkXCI6XCJidG4tZGVsZXRlLXNlY3Rpb24tXCIrc2VjLmlkfSk7XG4gICAgICAgICAgICBidG5TZWNEZWwuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmEgZmEtdHJhc2hcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+YDsgIFxuICAgICAgICAgICAgYnRuU2VjRGVsLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUucmVtb3ZlQ2hpbGQoc2VjLm5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMgPSB0aGlzLnNlY3Rpb25zLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gc2VjLmlkOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2VjLm5vZGUuYXBwZW5kQ2hpbGQoYnRuU2VjRGVsKTtcblxuICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChidG5TZWNBZGQpO1xuICAgICAgICAgICAgaWYodGhpcy5kZWJ1Zyl7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChzd2l0Y2hCdXR0b24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9OyAgXG4gICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKTtcblxuICAgICAgICAvLyBCVUlMRCBUSEUgU1dJVENIIFVJIEJVVFRPTiBUTyBETyBUTyBSVU4gTU9ERSBJRiBERUJVRy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGxldCBzd2l0Y2hCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXByaW1hcnkgcGl4aXVtLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgc3dpdGNoQnV0dG9uLmlubmVyVGV4dCA9IFwiR08gVE8gUlVOXCI7ICBcbiAgICAgICAgc3dpdGNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgfTsgIFxuICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoc3dpdGNoQnV0dG9uKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzLm5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cblxuXG5cblxuICAgIC8qKlxuICAgICAqIFJ1biBmb3IgdXNlciB0byBhbnN3ZXIgdGhlIHF1ZXN0aW9uc1xuICAgICAqL1xuICAgIHJ1bigpe1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgICAgdGhpcy5zZWN0aW9ucy5mb3JFYWNoKCAoc2VjKSA9PiB7XG4gICAgICAgICAgICBzZWMucnVuKHRoaXMubWFpbk5vZGUpO1xuICAgICAgICB9KTsgXG5cbiAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZSA9PSB0aGlzLnNlY3Rpb25zLmxlbmd0aC0xKXtcbiAgICAgICAgICAgIC8vUmVtb3ZlIE5leHQgYnRuXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAvL0NyZWF0ZSBTYXZlIGJ0blxuICAgICAgICAgICAgbGV0IHNhdmVCdG4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgcGl4aXVtLWJ0blwiLCBcInR5cGVcIjpcInN1Ym1pdFwiLCBcImlkXCI6XCJmb3JtLWJ1aWxkZXItc2F2ZS1maW5hbC1idG5cIn0pOyAgXG4gICAgICAgICAgICBzYXZlQnRuLmlubmVyVGV4dCA9IFwiU0FWRVwiOyAgXG4gICAgICAgICAgICBzYXZlQnRuLm9uY2xpY2sgPSAoZSkgPT4gXG4gICAgICAgICAgICB7ICAgXG4gICAgICAgICAgICAgICAgaWYodGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pc0NvbXBsZXRlZCgpKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21waWxlSnNvbigpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJGb3JtIGhhcyBub3QgYmVlbiBmdWxseSBjb21wbGV0ZWQgeWV0LiBQbGVhc2UgcHJvY2VlZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9OyAgXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLmFmdGVyKHNhdmVCdG4pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tIERFQlVHIFNBVkUgQlVUVE9OIC0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGxldCBzYXZlQnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1zdWNjZXNzIHBpeGl1bS1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIiwgXCJpZFwiOlwiZm9ybS1idWlsZGVyLXNhdmUtYnRuXCJ9KTsgIFxuICAgICAgICBzYXZlQnV0dG9uLmlubmVyVGV4dCA9IFwiU0FWRVwiOyAgXG4gICAgICAgIHNhdmVCdXR0b24ub25jbGljayA9ICgpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICB0aGlzLmNvbXBpbGVKc29uKCk7XG4gICAgICAgIH07ICBcbiAgICAgICAgaWYodGhpcy5kZWJ1Zyl7XG4gICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKHNhdmVCdXR0b24pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBCVUlMRCBUSEUgU1dJVENIIFVJIEJVVFRPTiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBsZXQgc3dpdGNoQnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1wcmltYXJ5IHBpeGl1bS1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pOyAgXG4gICAgICAgIHN3aXRjaEJ1dHRvbi5pbm5lclRleHQgPSBcIkdPIFRPIEJVSUxEIE1PREVcIjsgICBcbiAgICAgICAgc3dpdGNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgdGhpcy5idWlsZCgpO1xuICAgICAgICB9OyAgXG4gICAgICAgIGlmKHRoaXMuZGVidWcpe1xuICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChzd2l0Y2hCdXR0b24pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gICAgIHRoaXMubWFpbk5vZGUuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJsaXN0XCI+PCEtLSBTb3J0YWJsZSAtLT5cbiAgICAgICAgLy8gICAgIDxkaXYgY2xhc3M9XCJpdGVtXCI+IEl0ZW0gMVxuICAgICAgICAvLyAgICAgICA8ZGl2IGNsYXNzPVwic3VibGlzdFwiPjwhLS0gTmVzdGVkIFNvcnRhYmxlOyBXcmFwcGluZyBjb250YWluZXIgbmVlZGVkIC0tPlxuICAgICAgICAvLyAgICAgICAgIDxkaXYgY2xhc3M9XCJzdWJpdGVtXCI+U3ViaXRlbSAxPC9kaXY+XG4gICAgICAgIC8vICAgICAgICAgPGRpdiBjbGFzcz1cInN1Yml0ZW1cIj5TdWJpdGVtIDI8L2Rpdj5cbiAgICAgICAgLy8gICAgICAgPC9kaXY+XG4gICAgICAgIC8vICAgICA8L2Rpdj5cbiAgICAgICAgLy8gICAgIDxkaXYgY2xhc3M9XCJpdGVtXCI+IEl0ZW0gMiA8L2Rpdj5cbiAgICAgICAgLy8gICA8L2Rpdj5gO1xuXG4gICAgICAgIC8vIGxldCB0ZW1wID0gc29ydGFibGUodGhpcy5tYWluTm9kZSwge1xuICAgICAgICAvLyAgICAgY29weTp0cnVlIC8vIGRlZmF1bHQgdG8gZmFsc2VcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQodGVtcCk7XG5cbiAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgfVxuXG4gICAgcmVzdWx0KCl7XG4gICAgICAgIC8vIDxjYW52YXMgaWQ9XCJteUNoYXJ0XCIgd2lkdGg9XCI0MDBcIiBoZWlnaHQ9XCI0MDBcIj48L2NhbnZhXG4gICAgICAgIC8vIGxldCBjaGFydEhvbGRlciA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiLCB7XG4gICAgICAgIC8vICAgICBcImlkXCI6XCJjaGFydGRpdlwiLFxuICAgICAgICAvLyAgICAgXCJ3aWR0aFwiOiA0MDAsXG4gICAgICAgIC8vICAgICBcImhlaWdodFwiOiA0MDBcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgLy8gdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG4gICAgICAgIC8vIDtcblxuICAgICAgICAvLyB2YXIgbXlMaW5lQ2hhcnQgPSBuZXcgQ2hhcnQoY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSwge1xuICAgICAgICAvLyAgICAgdHlwZTogJ2xpbmUnLFxuICAgICAgICAvLyAgICAgZGF0YToge1xuICAgICAgICAvLyAgICAgICAgIGRhdGFzZXRzOiBbe1xuICAgICAgICAvLyAgICAgICAgICAgICBsYWJlbDogJ1Rlc3QgRGF0YXNldCcsXG4gICAgICAgIC8vICAgICAgICAgICAgIGRhdGE6IFt7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB4OiAtMTAsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB5OiAwXG4gICAgICAgIC8vICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHg6IDAsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB5OiAxMFxuICAgICAgICAvLyAgICAgICAgICAgICB9LCB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB4OiAxMCxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHk6IDVcbiAgICAgICAgLy8gICAgICAgICAgICAgfV1cbiAgICAgICAgLy8gICAgICAgICB9XVxuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgIC8vb3B0aW9uczogb3B0aW9uc1xuICAgICAgICAvLyB9KTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIENsZWFyIEFMTCB0aGUgbm9kZXNcbiAgICAgKi9cbiAgICBjbGVhcigpe1xuICAgICAgICBpZih0aGlzLm1haW5Ob2RlKXtcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuaW5uZXJIVE1MID0gJyc7ICAvLyBjbGVhciBhbGwgdGhlIHN1YiBub2Rlc1xuICAgICAgICAgICAgdGhpcy5zZWN0aW9ucy5mb3JFYWNoKCAoc2VjKSA9PiB7XG4gICAgICAgICAgICAgICAgc2VjLmNsZWFyKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudE5vZGUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cblxuXG5cbiAgICBkaXNwbGF5KCl7XG4gICAgICAgIC8vIHRoaXMub3V0cHV0ID0gXCJcIjtcbiAgICAgICAgLy8gdGhpcy5zZWN0aW9ucy5mb3JFYWNoKCAoc2VjdGlvbikgPT4ge1xuICAgICAgICAvLyAgICAgdGhpcy5vdXRwdXQgKz0gc2VjdGlvbi5kaXNwbGF5KCk7XG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvLyB0aGlzLm1haW5Ob2RlLmlubmVySFRNTCA9IHRoaXMub3V0cHV0O1xuICAgICAgICBpZih0aGlzLmN1cnJlbnROb2RlPj0wICYmIHRoaXMuY3VycmVudE5vZGU8dGhpcy5zZWN0aW9ucy5sZW5ndGgpe1xuICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5zaG93KCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuXG4gICAgY29tcGlsZUpzb24oKXtcbiAgICAgICAgbGV0IGFycjogYW55W107XG4gICAgICAgIGFyciA9IFtdO1xuICAgICAgICB0aGlzLnNlY3Rpb25zLmZvckVhY2goIChzZWM6U2VjdGlvbikgPT4ge1xuICAgICAgICAgICAgYXJyLnB1c2goc2VjLmNvbXBpbGVKc29uKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0ID0gSlNPTi5zdHJpbmdpZnkoIHtcInNlY3Rpb25zXCI6YXJyfSApO1xuICAgICAgICBjb25zb2xlLmxvZygnZmluYWxPdXRwdXQnKTtcbiAgICAgICAgY29uc29sZS5sb2coZmluYWxPdXRwdXQpO1xuICAgICAgICByZXR1cm4gZmluYWxPdXRwdXQ7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBNb3ZlIHRoZSBzbGlkZXIgb3IgZGlzcGxheSB0byB0aGUgbmV4dCBzZWN0aW9uXG4gICAgICovXG4gICAgbW92ZVNlY3Rpb24obmV4dFNsaWRlOmJvb2xlYW4pe1xuICAgICAgICAvLyBpZiBtb3ZlIGZvcndhcmRcbiAgICAgICAgaWYobmV4dFNsaWRlKXtcbiAgICAgICAgICAgIC8vIG1ha2luZyBzdXJlIEkgYW0gYWxsb3dlZCB0byBtb3ZlIHRvIHRoZSBuZXh0IHNsaWRlIGlmIHRoZXJlIGlzIG9uZVxuICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZT49MCAmJiB0aGlzLmN1cnJlbnROb2RlPHRoaXMuc2VjdGlvbnMubGVuZ3RoLTEpe1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudE5vZGUrKztcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLnNob3coKTtcbiAgICAgICAgICAgICAgICAvL0Rpc3BsYXkgUHJldmlvdXMgYnRuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1wcmV2aW91cy1zZWN0aW9uLScrdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pZCkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZSA9PSB0aGlzLnNlY3Rpb25zLmxlbmd0aC0xKXtcbiAgICAgICAgICAgICAgICAgICAgLy9SZW1vdmUgTmV4dCBidG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAvL0NyZWF0ZSBTYXZlIGJ0blxuICAgICAgICAgICAgICAgICAgICBsZXQgc2F2ZUJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tc3VjY2VzcyBwaXhpdW0tYnRuXCIsIFwidHlwZVwiOlwic3VibWl0XCIsIFwiaWRcIjpcImZvcm0tYnVpbGRlci1zYXZlLWZpbmFsLWJ0blwifSk7ICBcbiAgICAgICAgICAgICAgICAgICAgc2F2ZUJ0bi5pbm5lclRleHQgPSBcIlNBVkVcIjsgIFxuICAgICAgICAgICAgICAgICAgICBzYXZlQnRuLm9uY2xpY2sgPSAoZSkgPT4gXG4gICAgICAgICAgICAgICAgICAgIHsgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaXNDb21wbGV0ZWQoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21waWxlSnNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJGb3JtIGhhcyBub3QgYmVlbiBmdWxseSBjb21wbGV0ZWQgeWV0LiBQbGVhc2UgcHJvY2VlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTsgIFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLmFmdGVyKHNhdmVCdG4pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vRGlzcGxheSBOZXh0IGJ0blxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgICAgICBhbGVydChcIllvdSBhbHJlYWR5IGFyZSBvbiB0aGUgbmV4dCBzbGlkZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAvLyBtYWtpbmcgc3VyZSBJIGFtIGFsbG93ZWQgdG8gbW92ZSB0byB0aGUgcHJldmlvdXMgc2xpZGUgaWYgdGhlcmUgaXMgb25lXG4gICAgICAgICAgICBpZih0aGlzLmN1cnJlbnROb2RlPj0xICYmIHRoaXMuY3VycmVudE5vZGU8dGhpcy5zZWN0aW9ucy5sZW5ndGgpe1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudE5vZGUtLTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLnNob3coKTtcbiAgICAgICAgICAgICAgICAvL0Rpc3BsYXkgTmV4dCBidG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudE5vZGU9PTApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9SZW1vdmUgUHJldmlvdXMgYnRuXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tcHJldmlvdXMtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiWW91IGFscmVhZHkgYXJlIG9uIHRoZSBmaXJzdCBzbGlkZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3BpeGl1bWRpZ2l0YWwvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vc2VjdGlvbi50c1wiKTsiLCJpbXBvcnQge0Jsb2NrLCBCbG9ja1R5cGV9IGZyb20gXCIuL2Jsb2NrL2Jsb2NrXCI7XG5pbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuL2J1aWxkZXJcIjtcbmltcG9ydCB7IEJsb2NrRmFjdG9yeSB9IGZyb20gXCIuL2Jsb2NrL2Jsb2NrRmFjdG9yeVwiO1xuaW1wb3J0IHsgQmxvY2tTbGlkZXIgfSBmcm9tIFwiLi9ibG9jay9ibG9ja1NsaWRlclwiO1xuXG4vKipcbiAqIFNFQ1RJT04gY2xhc3MgY29udGFpbnMgYSBwb3RlbnRpYWwgbGlzdCBvZiBxdWVzdGlvbiB0aGF0IGlzIGRpc3BsYXllZCBvbiB0aGUgc2FtZSBwYWdlIFxuICovXG5leHBvcnQgY2xhc3MgU2VjdGlvbntcbiAgICBibG9ja3M6QmxvY2tbXTsgXG4gICAgdGl0bGU6IHN0cmluZzsgICBcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgb3V0cHV0OiBzdHJpbmc7XG4gICAgaWQ6c3RyaW5nO1xuICAgIHBhcmVudDogSFRNTEVsZW1lbnQ7XG4gICAgbm9kZTogSFRNTEVsZW1lbnQ7XG4gICAgY2FsbGJhY2s6IEZ1bmN0aW9uO1xuXG4gICAgY29uc3RydWN0b3IoX3BhcmVudDpIVE1MRWxlbWVudCwgX2pzb246Rm9ybURhdGEsIF9jYWxsYmFjazpGdW5jdGlvbil7XG4gICAgICAgIHRoaXMucGFyZW50ID0gX3BhcmVudDtcbiAgICAgICAgdGhpcy5ibG9ja3MgPSBbXTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IF9jYWxsYmFjaztcbiAgICAgICAgdGhpcy50aXRsZSA9IFwiRGVmYXVsdCBUaXRsZVwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBcImRlZmF1bHRfbmFtZVwiO1xuICAgICAgICB0aGlzLmlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpO1xuXG4gICAgICAgIGlmKF9qc29uKXtcbiAgICAgICAgICAgIGlmKF9qc29uW1widGl0bGVcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMudGl0bGUgPSBfanNvbltcInRpdGxlXCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoX2pzb25bXCJuYW1lXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSBfanNvbltcIm5hbWVcIl07XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZihfanNvbltcImJsb2Nrc1wiXSl7XG4gICAgICAgICAgICAgICAgX2pzb25bXCJibG9ja3NcIl0uZm9yRWFjaCggKGIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2NrTW9kZWwgPSBuZXcgQmxvY2soYik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzLnB1c2goYmxvY2tNb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgIC8vYmxvY2tNb2RlbC5ydW4odGhpcy5ub2RlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogRGlzcGxheSB0aGUgZm9ybSBpbiBCVUlMREVSIE1PREUgZm9yIHRoZSB1c2VyIHRvIGVkaXQgdGhlIGZvcm0gaXRzZWxmXG4gICAgICogQHBhcmFtIG5vZGUgXG4gICAgICovXG4gICAgYnVpbGQobm9kZSl7XG4gICAgICAgIHRoaXMubm9kZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicm93IHBpeGl1bS1ib3hcIlxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDcmVhdGUgc2VjdGlvbiBoZWFkZXIgZGl2IHdpdGggdGl0bGUgYW5kIG5hbWUgaW5wdXRcbiAgICAgICAgbGV0IG5vZGVIZWFkZXIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1wiY2xhc3NcIjogXCJyb3cgcGl4aXVtLWJsb2NrLWJ1aWxkIHBpeGl1bS1ibG9jay1idWlsZC1oZWFkZXJcIn0pO1xuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dFRleHQobm9kZUhlYWRlciwgdGhpcy5pZCwgdGhpcy50aXRsZSwgXCJUaXRsZSBTZWN0aW9uXCIsICh2YWwpID0+IHt0aGlzLnRpdGxlPXZhbDt9LCBcImNvbC1tZC00XCIgKTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXRUZXh0KG5vZGVIZWFkZXIsIHRoaXMuaWQsIHRoaXMubmFtZSwgXCJOYW1lIFNlY3Rpb25cIiwgKHZhbCkgPT4ge3RoaXMubmFtZT12YWw7fSwgXCJjb2wtbWQtNFwiICk7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChub2RlSGVhZGVyKTtcblxuICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKCAoYmxrOkJsb2NrKSA9PiB7XG4gICAgICAgICAgICBibGsuYnVpbGQodGhpcy5ub2RlKTtcbiAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBCT0xDSyBCVE5cbiAgICAgICAgICAgIGxldCBkZWxCdG4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImJ0biBidG4tZGFuZ2VyIHBpeGl1bS1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pO1xuICAgICAgICAgICAgZGVsQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLXRyYXNoXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7ICBcbiAgICAgICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUucmVtb3ZlQ2hpbGQoYmxrLm5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzID0gdGhpcy5ibG9ja3MuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBibGsuaWQ7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBibGsubm9kZS5hcHBlbmRDaGlsZChkZWxCdG4pO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIEJVSUxEIEFERCBCT0xDSyBCVE5cbiAgICAgICAgbGV0IGFkZEJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tc3VjY2VzcyBwaXhpdW0tYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICBhZGRCdXR0b24uaW5uZXJIVE1MID0gJysnOyAgXG4gICAgICAgIGFkZEJ1dHRvbi5vbmNsaWNrID0gKGV2KSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgbGV0IGJ0bkJsa0FkZCA9IDxIVE1MRWxlbWVudD5ldi50YXJnZXQ7XG4gICAgICAgICAgICAvLyBBREQgTkVXIEJPTENLXG4gICAgICAgICAgICBsZXQgYmxrID0gbmV3IEJsb2NrKG51bGwpO1xuICAgICAgICAgICAgdGhpcy5ibG9ja3MucHVzaChibGspO1xuICAgICAgICAgICAgdGhpcy5ub2RlLnJlbW92ZUNoaWxkKGJ0bkJsa0FkZCk7XG4gICAgICAgICAgICBsZXQgYnRuU2VjRGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG4tZGVsZXRlLXNlY3Rpb24tXCIrdGhpcy5pZCk7XG4gICAgICAgICAgICB0aGlzLm5vZGUucmVtb3ZlQ2hpbGQoYnRuU2VjRGVsKTtcbiAgICAgICAgICAgIGJsay5idWlsZCh0aGlzLm5vZGUpO1xuICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIEJPTENLIEJUTlxuICAgICAgICAgICAgbGV0IGJ0bkJsa0RlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgcGl4aXVtLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7XG4gICAgICAgICAgICBidG5CbGtEZWwuaW5uZXJUZXh0ID0gJzxpIGNsYXNzPVwiZmEgZmEtdHJhc2hcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JzsgIFxuICAgICAgICAgICAgYnRuQmxrRGVsLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5yZW1vdmVDaGlsZChibGsubm9kZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5ibG9ja3MgPSB0aGlzLmJsb2Nrcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IGJsay5pZDsgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJsay5ub2RlLmFwcGVuZENoaWxkKGJ0bkJsa0RlbCk7XG5cbiAgICAgICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChidG5CbGtBZGQpO1xuICAgICAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGJ0blNlY0RlbCk7XG4gICAgICAgIH07ICBcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGFkZEJ1dHRvbik7XG5cbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpO1xuICAgIH1cblxuXG5cbiAgICAvKipcbiAgICAgKiBSdW4gdGhlIGZvcm0gZm9yIHVzZXIgdG8gYW5zd2VyXG4gICAgICogQHBhcmFtIG5vZGUgXG4gICAgICovXG4gICAgcnVuKG5vZGUpe1xuXG4gICAgICAgIHRoaXMubm9kZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicm93IHBpeGl1bS1ib3hcIlxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IG5hbWVOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgxXCIpO1xuICAgICAgICBuYW1lTm9kZS5pbm5lckhUTUwgPSB0aGlzLnRpdGxlO1xuICAgICAgICBsZXQgaHJOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImhyXCIpO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobmFtZU5vZGUpO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoaHJOYW1lKTtcblxuICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKCAoYikgPT4ge1xuICAgICAgICAgICAgYi5ydW4odGhpcy5ub2RlKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAvLyBCVUlMRCBUSEUgQlVUVE9OLiBQUkVWSU9VUyBCVVRUT04gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgbGV0IHByZXZCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLWluZm8gcGl4aXVtLWJ0blwiLCBcImlkXCI6IFwiYnRuLXByZXZpb3VzLXNlY3Rpb24tXCIrdGhpcy5pZCwgXCJ0eXBlXCI6XCJidXR0b25cIn0pOyAgXG4gICAgICAgIHByZXZCdXR0b24uaW5uZXJUZXh0ID0gXCJQcmV2aW91c1wiO1xuICAgICAgICBwcmV2QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7ICBcbiAgICAgICAgcHJldkJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIGlmKHRoaXMuY2FsbGJhY2spe1xuICAgICAgICAgICAgICAgIC8vIFRSVUUgRk9SIE5FWFQgU0xJREVcbiAgICAgICAgICAgICAgICAvLyBGQUxTRSBGT1IgUFJFViBTTElERVxuICAgICAgICAgICAgICAgIHRoaXMuY2FsbGJhY2soZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9OyAgXG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChwcmV2QnV0dG9uKTtcblxuICAgICAgICAvLyBCVUlMRCBUSEUgQlVUVE9OLiBORVhUIEJVVFRPTiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBsZXQgbmV4dEJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4taW5mbyBwaXhpdW0tYnRuXCIsIFwiaWRcIjogXCJidG4tbmV4dC1zZWN0aW9uLVwiK3RoaXMuaWQsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICBuZXh0QnV0dG9uLmlubmVyVGV4dCA9IFwiTmV4dFwiOyAgXG4gICAgICAgIG5leHRCdXR0b24ub25jbGljayA9ICgpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICBpZih0aGlzLmlzQ29tcGxldGVkKCkpe1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuY2FsbGJhY2spe1xuICAgICAgICAgICAgICAgICAgICAvLyBUUlVFIEZPUiBORVhUIFNMSURFXG4gICAgICAgICAgICAgICAgICAgIC8vIEZBTFNFIEZPUiBQUkVWIFNMSURFXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsbGJhY2sodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJGb3JtIGhhcyBub3QgYmVlbiBmdWxseSBjb21wbGV0ZWQgeWV0LiBQbGVhc2UgcHJvY2VlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTsgIFxuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobmV4dEJ1dHRvbik7XG5cbiAgICAgICAgdGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgfVxuXG5cbiAgICBjbGVhcigpe1xuICAgICAgICBpZih0aGlzLm5vZGUpe1xuICAgICAgICAgICAgdGhpcy5ub2RlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmxvY2tzLmZvckVhY2goIChibGspID0+IHtcbiAgICAgICAgICAgIGJsay5jbGVhcigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgZ2V0Tm9kZSgpe1xuICAgICAgICBhbGVydCh0aGlzLm5vZGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhpZGUgdGhlIGN1cnJlbnQgc2VjdGlvblxuICAgICAqL1xuICAgIHNob3coKXtcbiAgICAgICAgdGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzcGxheSB0aGUgY3VycmVudCBzZWN0aW9uIG9uIHNjcmVlblxuICAgICAqL1xuICAgIGhpZGUoKXtcbiAgICAgICAgdGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB3aGV0aGVyIHRoZSBGT1JNIGhhcyBiZWVuIGZ1bGx5IGNvbXBsZXRlZCAtIEFsbCBibG9ja3MgaGF2ZSBhIHZhbGlkIGFuc3dlclxuICAgICAqL1xuICAgIGlzQ29tcGxldGVkKCl7XG4gICAgICAgIGxldCBpc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuYmxvY2tzLmZvckVhY2goIChibGs6QmxvY2spPT57XG4gICAgICAgICAgICBpZihibGsgJiYgIWJsay5hbnN3ZXIgJiYgKGJsay50eXBlICE9PSBCbG9ja1R5cGUuTk9BTlNXRVIpKXtcbiAgICAgICAgICAgICAgICBpc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGlzQ29tcGxldGVkO1xuICAgIH1cblxuXG4gICAgY29tcGlsZUpzb24oKXtcbiAgICAgICAgbGV0IGFycjphbnlbXTtcbiAgICAgICAgYXJyID0gW107XG4gICAgICAgIHRoaXMuYmxvY2tzLmZvckVhY2goIChibGs6QmxvY2spID0+IHtcbiAgICAgICAgICAgIGFyci5wdXNoKGJsay5jb21waWxlSnNvbigpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBzZWMgPSB7XG4gICAgICAgICAgICBcInRpdGxlXCI6IHRoaXMudGl0bGUsXG4gICAgICAgICAgICBcIm5hbWVcIjogdGhpcy5uYW1lLFxuICAgICAgICAgICAgXCJibG9ja3NcIjphcnJcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VjO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9jay50c1wiKTsiLCJpbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5pbXBvcnQge0Nob2ljZX0gZnJvbSBcIi4vY2hvaWNlXCI7XG5cbmltcG9ydCB7QmxvY2tTbGlkZXJ9IGZyb20gXCIuL2Jsb2NrU2xpZGVyXCI7XG5pbXBvcnQge0Jsb2NrRnJlZXRleHR9IGZyb20gXCIuL2Jsb2NrRnJlZXRleHRcIjtcbmltcG9ydCB7QmxvY2tSYWRpb30gZnJvbSBcIi4vYmxvY2tSYWRpb1wiO1xuaW1wb3J0IHsgQmxvY2tDaGVja2JveCB9IGZyb20gXCIuL2Jsb2NrQ2hlY2tib3hcIjtcbmltcG9ydCB7QmxvY2tMb25ndGV4dH0gZnJvbSBcIi4vYmxvY2tMb25ndGV4dFwiO1xuLy8gaW1wb3J0IHtCbG9ja05vYW5zd2VyfSBmcm9tIFwiLi9ibG9ja05vYW5zd2VyXCI7XG5cbmV4cG9ydCBlbnVtIEJsb2NrVHlwZSB7XG4gICAgRlJFRVRFWFQgPSAxLFxuICAgIFJBRElPID0gMixcbiAgICBTTElERVIgPSAzLFxuICAgIENIRUNLQk9YID0gNCxcbiAgICBMT05HVEVYVCA9IDUsXG4gICAgTk9BTlNXRVIgPSA2XG59XG5cblxuLyoqXG4gKiBBIEJsb2NrIGlzIGEgbGlzdCBcbiAqL1xuZXhwb3J0IGNsYXNzIEJsb2Nre1xuICAgIHR5cGU6bnVtYmVyO1xuICAgIHRleHQ6c3RyaW5nO1xuICAgIGFuc3dlcjphbnk7XG4gICAgbmFtZTpzdHJpbmc7XG4gICAgbWluOnN0cmluZztcbiAgICBtYXg6c3RyaW5nO1xuICAgIHN0ZXA6c3RyaW5nO1xuICAgIGNob2ljZXM6Q2hvaWNlW107XG5cbiAgICBvdXRwdXQ6c3RyaW5nO1xuICAgIGlkOnN0cmluZztcbiAgICBqc29uOmFueTtcblxuICAgIG5vZGU6IEhUTUxFbGVtZW50O1xuXG4gICAgLypcbiAgICBcInRpdGxlXCI6IFwiREVMRUdBVElPTjogPGJyPiA8YnI+IEhvdyBza2lsbGVkIGRvIHlvdSBmZWVsIHRvZGF5IGFib3V0IHlvdXIgYWJpbGl0eSB0byBkZWxlZ2F0ZT9cIixcbiAgICBcInR5cGVcIjogNCxcbiAgICBcImdyb3VwXCI6IDEsXG4gICAgXCJsYWJlbFwiOiBcbiAgICAqL1xuXG4gICAgY29uc3RydWN0b3IoX2pzb246Rm9ybURhdGEgPSBudWxsKXtcbiAgICAgICAgdGhpcy5qc29uID0gX2pzb247XG4gICAgICAgIHRoaXMudGV4dCA9IFwiXCI7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMubWluID0gXCJcIjtcbiAgICAgICAgdGhpcy5tYXggPSBcIlwiO1xuICAgICAgICB0aGlzLnN0ZXAgPSBcIlwiO1xuICAgICAgICB0aGlzLmFuc3dlciA9IFwiXCI7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuY2hvaWNlcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyk7XG5cbiAgICAgICAgaWYoX2pzb24pe1xuICAgICAgICAgICAgaWYoX2pzb25bXCJ0ZXh0XCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHQgPSBfanNvbltcInRleHRcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKF9qc29uW1widHlwZVwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID0gX2pzb25bXCJ0eXBlXCJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmFuc3dlciA9IFwiXCI7XG4gICAgICAgICAgICBpZihfanNvbltcImFuc3dlclwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5hbnN3ZXIgPSBfanNvbltcImFuc3dlclwiXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoX2pzb25bXCJuYW1lXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSBfanNvbltcIm5hbWVcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKF9qc29uW1wibWluXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLm1pbiA9IF9qc29uW1wibWluXCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoX2pzb25bXCJtYXhcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMubWF4ID0gX2pzb25bXCJtYXhcIl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihfanNvbltcInN0ZXBcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMuc3RlcCA9IF9qc29uW1wic3RlcFwiXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYodGhpcy50eXBlID09PSBCbG9ja1R5cGUuUkFESU8gfHwgdGhpcy50eXBlID09PSBCbG9ja1R5cGUuQ0hFQ0tCT1gpe1xuICAgICAgICAgICAgICAgIC8vIGxvYWQgYWRkaXRpb25hbCBkYXRhXG4gICAgICAgICAgICAgICAgaWYoX2pzb25bXCJjaG9pY2VzXCJdKXtcbiAgICAgICAgICAgICAgICAgICAgX2pzb25bXCJjaG9pY2VzXCJdLmZvckVhY2goY2hvaWNlSnNvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hvaWNlID0gbmV3IENob2ljZShjaG9pY2VKc29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hvaWNlcy5wdXNoKGNob2ljZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL3RoaXMuY2hvaWNlcyA9IF9qc29uW1wiY2hvaWNlc1wiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgYW5kIHJlbW92ZSBhbGwgdGhlIEhUTUwgTm9kZVxuICAgICAqL1xuICAgIGNsZWFyKCl7XG4gICAgICAgIGlmKHRoaXMubm9kZSl7XG4gICAgICAgICAgICB0aGlzLm5vZGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB1c2VkIHRvIGJ1aWxkIHRoZSBmb3JtXG4gICAgICovXG4gICAgYnVpbGQobm9kZSl7XG4gICAgICAgIHRoaXMubm9kZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCIgOiBcInJvdyBwaXhpdW0tYmxvY2stYnVpbGRcIlxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgaHIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJoclwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLWhyIGNvbC1tZC0xMlwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0VGV4dCh0aGlzLm5vZGUsIHRoaXMuaWQsIHRoaXMudGV4dCwgXCJUZXh0XCIsICh2YWwpID0+IHt0aGlzLnRleHQ9dmFsO30sIFwiY29sLW1kLTRcIiApO1xuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dFRleHQodGhpcy5ub2RlLCB0aGlzLmlkLCB0aGlzLm5hbWUsIFwiTmFtZVwiLCAodmFsKSA9PiB7dGhpcy5uYW1lPXZhbDt9LCBcImNvbC1tZC00XCIgKTtcbiAgICAgICAgbGV0IGVudW1BcnJheSA9IE9iamVjdC5rZXlzKEJsb2NrVHlwZSkuZmlsdGVyKGE9PmEubWF0Y2goL15cXEQvKSkubWFwKG5hbWU9Pih7bmFtZSwgdmFsdWU6IEJsb2NrVHlwZVtuYW1lXSBhcyBudW1iZXJ9KSk7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0RHJvcGRvd24odGhpcy5ub2RlLCB0aGlzLmlkLCB0aGlzLnR5cGUsIFwiVHlwZVwiLCAodmFsKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnR5cGU9TnVtYmVyKHZhbCk7XG4gICAgICAgICAgICB0aGlzLmFuc3dlcj0nJztcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlclN1YkVsZW1lbnRCbG9jaygpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sIGVudW1BcnJheSwgXCJjb2wtbWQtNFwiICk7XG5cbiAgICAgICAgLy8gLS0tLSBGaWVsZCBmb3IgQ2hvaWNlcyBibG9ja1xuICAgICAgICBsZXQgYmxrQ2hvaWNlc1N0eWxlID0gXCJcIjtcbiAgICAgICAgaWYoKHRoaXMudHlwZSAhPT0gQmxvY2tUeXBlLlJBRElPKSAmJiAodGhpcy50eXBlICE9PSBCbG9ja1R5cGUuQ0hFQ0tCT1gpKXtcbiAgICAgICAgICAgIGJsa0Nob2ljZXNTdHlsZSA9IFwiZGlzcGxheTpub25lO1wiXG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5vZGVDaG9pY2VzID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiaWRcIjogXCJjaG9pY2VzX2Jsb2NrX1wiK3RoaXMuaWQsXG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicm93IGNvbC1tZC0xMlwiLFxuICAgICAgICAgICAgXCJzdHlsZVwiOiBibGtDaG9pY2VzU3R5bGVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGxhYlRpdGxlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIGxhYlRpdGxlLmlubmVySFRNTCA9IFwiQ2hvaWNlcyA6IFwiO1xuICAgICAgICBub2RlQ2hvaWNlcy5hcHBlbmRDaGlsZChsYWJUaXRsZSk7XG4gICAgICAgIGlmKHRoaXMuY2hvaWNlcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgIHRoaXMuY2hvaWNlcy5mb3JFYWNoKCAoY2g6Q2hvaWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgY2guYnVpbGQobm9kZUNob2ljZXMpO1xuICAgICAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBCT0xDSyBCVE5cbiAgICAgICAgICAgICAgICBsZXQgZGVsQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG4gYnRuLWRhbmdlciBwaXhpdW0tYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTtcbiAgICAgICAgICAgICAgICBkZWxCdG4uaW5uZXJUZXh0ID0gJy0nOyAgXG4gICAgICAgICAgICAgICAgZGVsQnRuLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICBub2RlQ2hvaWNlcy5yZW1vdmVDaGlsZChjaC5ub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaG9pY2VzID0gdGhpcy5jaG9pY2VzLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gY2guaWQ7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNoLm5vZGUuYXBwZW5kQ2hpbGQoZGVsQnRuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQlVJTEQgQUREIEJPTENLIEJUTlxuICAgICAgICBsZXQgYWRkQ2hvaWNlQnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1zdWNjZXNzIHBpeGl1bS1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pOyAgXG4gICAgICAgIGFkZENob2ljZUJ1dHRvbi5pbm5lclRleHQgPSAnKyc7ICBcbiAgICAgICAgYWRkQ2hvaWNlQnV0dG9uLm9uY2xpY2sgPSAoZXYpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICBsZXQgYnRuQ2hBZGQgPSA8SFRNTEVsZW1lbnQ+ZXYudGFyZ2V0O1xuICAgICAgICAgICAgLy8gQUREIE5FVyBCT0xDS1xuICAgICAgICAgICAgbGV0IGNoID0gbmV3IENob2ljZShudWxsKTtcbiAgICAgICAgICAgIHRoaXMuY2hvaWNlcy5wdXNoKGNoKTtcbiAgICAgICAgICAgIG5vZGVDaG9pY2VzLnJlbW92ZUNoaWxkKGJ0bkNoQWRkKTtcbiAgICAgICAgICAgIGNoLmJ1aWxkKG5vZGVDaG9pY2VzKTtcbiAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBCT0xDSyBCVE5cbiAgICAgICAgICAgIGxldCBidG5DaERlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgcGl4aXVtLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7XG4gICAgICAgICAgICBidG5DaERlbC5pbm5lclRleHQgPSAnLSc7ICBcbiAgICAgICAgICAgIGJ0bkNoRGVsLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgIG5vZGVDaG9pY2VzLnJlbW92ZUNoaWxkKGNoLm5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hvaWNlcyA9IHRoaXMuY2hvaWNlcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IGNoLmlkOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2gubm9kZS5hcHBlbmRDaGlsZChidG5DaERlbCk7XG5cbiAgICAgICAgICAgIG5vZGVDaG9pY2VzLmFwcGVuZENoaWxkKGJ0bkNoQWRkKTtcbiAgICAgICAgfTsgIFxuICAgICAgICBub2RlQ2hvaWNlcy5hcHBlbmRDaGlsZChhZGRDaG9pY2VCdXR0b24pO1xuXG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChub2RlQ2hvaWNlcyk7XG4gICAgICAgIC8vIC0tLS0gXG5cbiAgICAgICAgLy8gLS0tLSBGaWVsZCBmb3IgU2xpZGVyIGJsb2NrXG4gICAgICAgIGxldCBibGtTbGlkZXJTdHlsZSA9IFwiXCI7XG4gICAgICAgIGlmKHRoaXMudHlwZSAhPT0gQmxvY2tUeXBlLlNMSURFUil7XG4gICAgICAgICAgICBibGtTbGlkZXJTdHlsZSA9IFwiZGlzcGxheTpub25lO1wiXG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5vZGVTbGlkZXIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJpZFwiOiBcInNsaWRlcl9ibG9ja19cIit0aGlzLmlkLFxuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInJvdyBjb2wtbWQtMTJcIixcbiAgICAgICAgICAgIFwic3R5bGVcIjogYmxrU2xpZGVyU3R5bGVcbiAgICAgICAgfSk7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0VGV4dChub2RlU2xpZGVyLCB0aGlzLmlkLCB0aGlzLm1pbiwgXCJNaW5cIiwgKHZhbCkgPT4ge3RoaXMubWluPXZhbDt9LCBcImNvbC1tZC00XCIgKTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXRUZXh0KG5vZGVTbGlkZXIsIHRoaXMuaWQsIHRoaXMubWF4LCBcIk1heFwiLCAodmFsKSA9PiB7dGhpcy5tYXg9dmFsO30sIFwiY29sLW1kLTRcIiApO1xuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dFRleHQobm9kZVNsaWRlciwgdGhpcy5pZCwgdGhpcy5zdGVwLCBcIlN0ZXBcIiwgKHZhbCkgPT4ge3RoaXMuc3RlcD12YWw7fSwgXCJjb2wtbWQtNFwiICk7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChub2RlU2xpZGVyKTtcbiAgICAgICAgLy8gLS0tLVxuXG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChocik7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cbiAgICBcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHVzZWQgdG8gUnVuIHRoZSBmb3JtXG4gICAgICovXG4gICAgcnVuKG5vZGUpe1xuICAgICAgICAvLyBhbGVydChcIkNcIik7XG4gICAgICAgIGxldCB0aXRsZU5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJwXCIpOyAvL2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICB0aXRsZU5vZGUuaW5uZXJIVE1MID0gdGhpcy50ZXh0O1xuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZCh0aXRsZU5vZGUpO1xuXG4gICAgICAgIHN3aXRjaCh0aGlzLnR5cGUpe1xuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuUkFESU86XG4gICAgICAgICAgICAgICAgQmxvY2tSYWRpby5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuQ0hFQ0tCT1g6XG4gICAgICAgICAgICAgICAgQmxvY2tDaGVja2JveC5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuRlJFRVRFWFQ6XG4gICAgICAgICAgICAgICAgQmxvY2tGcmVldGV4dC5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLkxPTkdURVhUOlxuICAgICAgICAgICAgICAgIEJsb2NrTG9uZ3RleHQucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLk5PQU5TV0VSOlxuICAgICAgICAgICAgICAgIC8vIEJsb2NrTm9hbnN3ZXIucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLlNMSURFUjpcbiAgICAgICAgICAgICAgICBCbG9ja1NsaWRlci5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgaHIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJoclwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLWhyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChocik7XG5cbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpO1xuICAgIH1cblxuXG4gICAgZGlzcGxheSgpe1xuICAgIH1cblxuXG5cbiAgICB0cmlnZ2VyU3ViRWxlbWVudEJsb2NrKCl7XG4gICAgICAgIGxldCBzbGlkZXJCbG9jayA9IG51bGw7XG4gICAgICAgIGlmKHNsaWRlckJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGlkZXJfYmxvY2tfXCIrdGhpcy5pZCkpe1xuICAgICAgICAgICAgaWYodGhpcy50eXBlID09PSBCbG9ja1R5cGUuU0xJREVSKXtcbiAgICAgICAgICAgICAgICBzbGlkZXJCbG9jay5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgc2xpZGVyQmxvY2suc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGFsZXJ0KFwiTm9kZSBTaWxkZXIgbm90IGZvdW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNob2ljZUJsb2NrID0gbnVsbDtcbiAgICAgICAgaWYoY2hvaWNlQmxvY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNob2ljZXNfYmxvY2tfXCIrdGhpcy5pZCkpe1xuICAgICAgICAgICAgaWYoKHRoaXMudHlwZSA9PT0gQmxvY2tUeXBlLlJBRElPKSB8fCAodGhpcy50eXBlID09PSBCbG9ja1R5cGUuQ0hFQ0tCT1gpKXtcbiAgICAgICAgICAgICAgICBjaG9pY2VCbG9jay5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgY2hvaWNlQmxvY2suc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGFsZXJ0KFwiTm9kZSBDaG9pY2Ugbm90IGZvdW5kXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBjb21waWxlSnNvbigpe1xuICAgICAgICBsZXQgYXJyOmFueVtdO1xuICAgICAgICBhcnIgPSBbXTtcbiAgICAgICAgdGhpcy5jaG9pY2VzLmZvckVhY2goIChjaDpDaG9pY2UpID0+IHtcbiAgICAgICAgICAgIGFyci5wdXNoKGNoLmNvbXBpbGVKc29uKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5qc29uID0ge1xuICAgICAgICAgICAgXCJ0eXBlXCI6dGhpcy50eXBlLFxuICAgICAgICAgICAgXCJ0ZXh0XCI6dGhpcy50ZXh0LFxuICAgICAgICAgICAgXCJhbnN3ZXJcIjp0aGlzLmFuc3dlcixcbiAgICAgICAgICAgIFwibmFtZVwiOnRoaXMubmFtZSxcbiAgICAgICAgICAgIFwibWluXCI6dGhpcy5taW4sXG4gICAgICAgICAgICBcIm1heFwiOnRoaXMubWF4LFxuICAgICAgICAgICAgXCJzdGVwXCI6dGhpcy5zdGVwLFxuICAgICAgICAgICAgXCJjaG9pY2VzXCI6IGFyclxuICAgICAgICB9XG4gICAgXG4gICAgICAgIHJldHVybiB0aGlzLmpzb247XG4gICAgfVxufSIsIlxuZXhwb3J0IGNsYXNzIEJ1aWxkZXJ7XG5cbiAgICAvKipcbiAgICAgKiBCdWlsZCBhbmQgc2V0IGFsbCB0aGUgYXR0cmlidXRlIG9mIGEgSFRNTCBFbGVtZW50IG5vZGVcbiAgICAgKiBAcGFyYW0gdHlwZSBUaGUgdHlwZSBvZiB0aGUgaW5wdXQgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIF9wYXJhbXMgVGhlIGF0dHJpYnV0ZXMgbGlzdCB0byBzZXRcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlRWxlbWVudCh0eXBlOnN0cmluZywgX3BhcmFtczphbnkgPSBudWxsKXtcbiAgICAgICAgaWYoIXR5cGUpe1xuICAgICAgICAgICAgYWxlcnQoXCJDb3VsZCBub3QgYnVpbGQgdGhlIGVsZW1lbnRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG4gICAgICAgIGlmKF9wYXJhbXMpe1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIF9wYXJhbXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfcGFyYW1zW2tleV07XG4gICAgICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gd2lsbCBzZXQgYWxsIGF0dHJpYnV0ZSBpbnRvIGEgc3BlY2lmaWMgZWxlbWVudFxuICAgICAqIEBwYXJhbSBlbGVtIEVsZW1lbnQgdG8gc2V0IHRlIGF0dHJpYnV0ZSBvZlxuICAgICAqIEBwYXJhbSBfcGFyYW1zIFRoZSBhdHRyaWJ1dGVzIGxpc3QgdG8gc2V0XG4gICAgICovXG4gICAgc3RhdGljIHNldEF0dHJpYnV0ZXMoZWxlbTpIVE1MRWxlbWVudCwgX3BhcmFtczphbnkgPSBudWxsKXtcbiAgICAgICAgaWYoX3BhcmFtcyl7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gX3BhcmFtcykge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9wYXJhbXNba2V5XTtcbiAgICAgICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgc3RhdGljIGFkZEJ1aWxkZXJJbnB1dFRleHQobm9kZSwgaWQsIHZhbHVlLCBsYWJlbCwgY2FsbGJhY2ssIGNsYXNzZXM9XCJjb2wtbWQtMTJcIil7XG4gICAgICAgIGxldCBkaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1yb3ctYmxvY2sgXCIrY2xhc3Nlc1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGxhYiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICBsYWIuaW5uZXJIVE1MID0gbGFiZWwrXCI6IFwiO1xuICAgICAgICBsZXQgaW5wdXQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXRleHRib3hcIixcbiAgICAgICAgICAgIFwidHlwZVwiOiBcInRleHRcIixcbiAgICAgICAgICAgIFwidmFsdWVcIjogdmFsdWUsXG4gICAgICAgICAgICBcIm5hbWVcIjogbGFiZWwrXCJfXCIraWQsXG4gICAgICAgICAgICBcInN0eWxlXCI6IFwiY29sb3I6UmVkXCIsXG4gICAgICAgICAgICBcInBsYWNlaG9sZGVyXCI6IGxhYmVsXG4gICAgICAgIH0pO1xuICAgICAgICBpbnB1dC5vbmJsdXIgPSAoZXYpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2LnRhcmdldCk7XG4gICAgICAgICAgICBjYWxsYmFjaygoPEhUTUxJbnB1dEVsZW1lbnQ+ZXYudGFyZ2V0KS52YWx1ZSk7XG4gICAgICAgIH07IFxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobGFiKTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkaXYpO1xuICAgIH1cblxuICAgIC8qXG48c2VsZWN0IG5hbWU9XCJjYXJzXCIgaWQ9XCJjYXJzXCI+XG4gIDxvcHRpb24gdmFsdWU9XCJ2b2x2b1wiPlZvbHZvPC9vcHRpb24+XG4gIDxvcHRpb24gdmFsdWU9XCJzYWFiXCI+U2FhYjwvb3B0aW9uPlxuICA8b3B0aW9uIHZhbHVlPVwibWVyY2VkZXNcIj5NZXJjZWRlczwvb3B0aW9uPlxuICA8b3B0aW9uIHZhbHVlPVwiYXVkaVwiPkF1ZGk8L29wdGlvbj5cbjwvc2VsZWN0PlxuICAgICovXG4gICAgc3RhdGljIGFkZEJ1aWxkZXJJbnB1dERyb3Bkb3duKG5vZGUsIGlkLCB2YWx1ZSwgbGFiZWwsIGNhbGxiYWNrLCBvcHRpb25zLCBjbGFzc2VzPVwiY29sLW1kLTEyXCIpe1xuICAgICAgICBsZXQgZGl2ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tcm93LWJsb2NrIFwiK2NsYXNzZXNcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBsYWIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgbGFiLmlubmVySFRNTCA9IGxhYmVsK1wiOiBcIjtcbiAgICAgICAgbGV0IGlucHV0ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tZHJvcGRvd25cIixcbiAgICAgICAgICAgIFwidmFsdWVcIjogdmFsdWUsXG4gICAgICAgICAgICBcIm5hbWVcIjogbGFiZWwrXCJfXCIraWQsXG4gICAgICAgICAgICBcInN0eWxlXCI6IFwiZGlzcGxheTpibG9ja1wiXG4gICAgICAgIH0pO1xuICAgICAgICBpbnB1dC5vbmNoYW5nZSA9IChldikgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2soKDxIVE1MSW5wdXRFbGVtZW50PmV2LnRhcmdldCkudmFsdWUpO1xuICAgICAgICB9OyBcblxuICAgICAgICBvcHRpb25zLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICBsZXQgb3B0ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIsIHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGVsZW1lbnQudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmKHZhbHVlPT09ZWxlbWVudC52YWx1ZSl7XG4gICAgICAgICAgICAgICAgQnVpbGRlci5zZXRBdHRyaWJ1dGVzKG9wdCwge1xuICAgICAgICAgICAgICAgICAgICBcInNlbGVjdGVkXCI6XCJzZWxlY3RlZFwiXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdC5pbm5lckhUTUwgPSBlbGVtZW50Lm5hbWU7XG4gICAgICAgICAgICBpbnB1dC5hcHBlbmRDaGlsZChvcHQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobGFiKTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkaXYpO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9jaG9pY2UudHNcIik7IiwiXG5pbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBDaG9pY2V7XG4gICAgbGFiZWw6c3RyaW5nO1xuICAgIHZhbHVlOiBzdHJpbmc7XG4gICAgaWQ6c3RyaW5nO1xuICAgIGpzb246YW55O1xuICAgIG5vZGU6IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoX2pzb24pe1xuICAgICAgICB0aGlzLmlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpO1xuXG4gICAgICAgIGlmKF9qc29uKXtcbiAgICAgICAgICAgIGlmKF9qc29uW1wibGFiZWxcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMubGFiZWwgPSBfanNvbltcImxhYmVsXCJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihfanNvbltcInZhbHVlXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gX2pzb25bXCJ2YWx1ZVwiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHVzZWQgdG8gYnVpbGQgdGhlIGZvcm1cbiAgICAgKi9cbiAgICBidWlsZChub2RlKXtcbiAgICAgICAgdGhpcy5ub2RlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tcm93LWJsb2NrIGJsb2NrLWNob2ljZXMgY29sLW1kLTEyXCIsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENSRUFURSBWQUxVRSBJTlBVVFxuICAgICAgICBsZXQgbGFiVmFsdWUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7XCJmb3JcIjpcImlucHV0X1wiK3RoaXMudmFsdWUrXCJfXCIrdGhpcy5pZH0pO1xuICAgICAgICBsYWJWYWx1ZS5pbm5lckhUTUwgPSBcIlZhbHVlIDogXCI7XG4gICAgICAgIGxldCBpbnB1dFZhbHVlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS10ZXh0Ym94XCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IHRoaXMudmFsdWUsXG4gICAgICAgICAgICBcImlkXCI6IFwiaW5wdXRfXCIrdGhpcy52YWx1ZStcIl9cIit0aGlzLmlkLFxuICAgICAgICAgICAgXCJzdHlsZVwiOiBcImNvbG9yOlJlZDtcIlxuICAgICAgICB9KTtcbiAgICAgICAgaW5wdXRWYWx1ZS5vbmJsdXIgPSAoZXYpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2LnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlPSg8SFRNTElucHV0RWxlbWVudD5ldi50YXJnZXQpLnZhbHVlO1xuICAgICAgICB9OyBcblxuICAgICAgICAvLyBDUkVBVEUgTEFCRUwgSU5QVVRcbiAgICAgICAgbGV0IGxhYkxhYmVsID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwge1wiZm9yXCI6XCJpbnB1dF9cIit0aGlzLmxhYmVsK1wiX1wiK3RoaXMuaWQsIFwic3R5bGVcIjpcIm1pbi13aWR0aDogYXV0bztcIn0pO1xuICAgICAgICBsYWJMYWJlbC5pbm5lckhUTUwgPSBcIkxhYmVsIDogXCI7XG4gICAgICAgIGxldCBpbnB1dExhYmVsID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS10ZXh0Ym94XCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICBcImlkXCI6XCJpbnB1dF9cIit0aGlzLmxhYmVsK1wiX1wiK3RoaXMuaWQsXG4gICAgICAgICAgICBcInN0eWxlXCI6IFwiY29sb3I6UmVkO1wiXG4gICAgICAgIH0pO1xuICAgICAgICBpbnB1dExhYmVsLm9uYmx1ciA9IChldikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXYudGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMubGFiZWw9KDxIVE1MSW5wdXRFbGVtZW50PmV2LnRhcmdldCkudmFsdWU7XG4gICAgICAgIH07IFxuXG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChsYWJWYWx1ZSk7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChpbnB1dFZhbHVlKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGxhYkxhYmVsKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGlucHV0TGFiZWwpO1xuXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cbiAgICBjb21waWxlSnNvbigpe1xuICAgICAgICB0aGlzLmpzb24gPSB7XG4gICAgICAgICAgICBcImxhYmVsXCI6dGhpcy5sYWJlbCxcbiAgICAgICAgICAgIFwidmFsdWVcIjp0aGlzLnZhbHVlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuanNvbjtcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3BpeGl1bWRpZ2l0YWwvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYmxvY2tTbGlkZXIudHNcIik7IiwiaW1wb3J0IHtCbG9ja30gZnJvbSBcIi4vYmxvY2tcIjtcbmltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIEJsb2NrU2xpZGVye1xuXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jazpCbG9jayl7XG4gICAgICAgIGxldCBob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJlbGVtZW50LWZvcm0tY29udGFpbmVyXCIpO1xuICAgICAgICBsZXQgZmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cbiAgICAgICAgbGV0IG1pbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOlwiX2xlZnRcIlxuICAgICAgICB9KTtcbiAgICAgICAgbWluLmlubmVySFRNTCA9IGJsb2NrLm1pbjtcbiAgICAgICAgbGV0IG1heCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOlwiX3JpZ2h0XCJcbiAgICAgICAgfSk7O1xuICAgICAgICBtYXguaW5uZXJIVE1MID0gYmxvY2subWF4O1xuXG4gICAgICAgIC8vIDxvdXRwdXQgZm9yPVwiZm9vXCIgb25mb3JtaW5wdXQ9XCJ2YWx1ZSA9IGZvby52YWx1ZUFzTnVtYmVyO1wiPjwvb3V0cHV0PlxuXG4gICAgICAgIC8vQXNzaWduIGRpZmZlcmVudCBhdHRyaWJ1dGVzIHRvIHRoZSBlbGVtZW50LiBcbiAgICAgICAgQnVpbGRlci5zZXRBdHRyaWJ1dGVzKGZpZWxkLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXNsaWRlclwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwicmFuZ2VcIixcbiAgICAgICAgICAgIFwidmFsdWVcIjogYmxvY2suYW5zd2VyLFxuICAgICAgICAgICAgXCJtaW5cIjogYmxvY2subWluLFxuICAgICAgICAgICAgXCJtYXhcIjogYmxvY2subWF4LFxuICAgICAgICAgICAgXCJuYW1lXCI6IGJsb2NrLm5hbWUsXG4gICAgICAgICAgICBcImlkXCI6IFwiaW5wdXRyYW5nZV9cIitibG9jay5uYW1lXG4gICAgICAgIH0pO1xuICAgICAgICBpZihibG9jay5zdGVwKXtcbiAgICAgICAgICAgIGZpZWxkLnNldEF0dHJpYnV0ZShcInN0ZXBcIiwgYmxvY2suc3RlcCk7XG4gICAgICAgIH1cbiAgICAgICAgZmllbGQub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBibG9jay5hbnN3ZXIgPSBwYXJzZUZsb2F0KCg8SFRNTElucHV0RWxlbWVudD5maWVsZCkudmFsdWUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coKDxIVE1MSW5wdXRFbGVtZW50PmZpZWxkKSk7XG4gICAgICAgICAgICBsZXQgdGVtcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3V0cHV0X1wiK2Jsb2NrLm5hbWUpLmlubmVySFRNTCA9IGJsb2NrLmFuc3dlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpbnB1dERpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaW5wdXREaXYuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwaXhpdW0tYmxvY2stc2xpZGVyXCIpO1xuICAgICAgICAvL2Zvcm0uc2V0QXR0cmlidXRlKFwib25pbnB1dFwiLCBcIm91dHB1dF9cIit0aGlzLm5hbWUrXCIuaW5uZXJIVE1MID0gXCIrdGhpcy5uYW1lK1wiLnZhbHVlXCIgKTtcbiAgICAgICAgbGV0IG91dHB1dCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcIm91dHB1dFwiLCB7XG4gICAgICAgICAgICBcImlkXCI6IFwib3V0cHV0X1wiK2Jsb2NrLm5hbWVcbiAgICAgICAgfSk7XG4gICAgICAgIG91dHB1dC5pbm5lckhUTUwgPSBibG9jay5hbnN3ZXI7XG4gICAgICAgIFxuICAgICAgICBpbnB1dERpdi5hcHBlbmRDaGlsZChvdXRwdXQpO1xuICAgICAgICBpbnB1dERpdi5hcHBlbmRDaGlsZChmaWVsZCk7XG4gICAgICAgIGlucHV0RGl2LmFwcGVuZENoaWxkKG1pbik7XG4gICAgICAgIGlucHV0RGl2LmFwcGVuZENoaWxkKG1heCk7IFxuICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQoaW5wdXREaXYpO1xuXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaG9sZGVyKTtcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3BpeGl1bWRpZ2l0YWwvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYmxvY2tGcmVldGV4dC50c1wiKTsiLCJpbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBCbG9ja0ZyZWV0ZXh0e1xuXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jayl7XG4gICAgICAgIFxuICAgICAgICBsZXQgaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZWxlbWVudC1mb3JtLWNvbnRhaW5lclwiKTtcbiAgICAgICAgbGV0IGZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXG4gICAgICAgIC8vQXNzaWduIGRpZmZlcmVudCBhdHRyaWJ1dGVzIHRvIHRoZSBlbGVtZW50LiBcbiAgICAgICAgQnVpbGRlci5zZXRBdHRyaWJ1dGVzKGZpZWxkLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXRleHRib3hcIixcbiAgICAgICAgICAgIFwidHlwZVwiOiBcInRleHRcIixcbiAgICAgICAgICAgIFwidmFsdWVcIjogYmxvY2suYW5zd2VyLFxuICAgICAgICAgICAgXCJuYW1lXCI6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIFwic3R5bGVcIjogXCJjb2xvcjpSZWRcIlxuICAgICAgICB9KTsgXG4gICAgICAgIGZpZWxkLm9uYmx1ciA9ICgpID0+IHtcbiAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9ICg8SFRNTElucHV0RWxlbWVudD5maWVsZCkudmFsdWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICB9OyBcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGZpZWxkKTsgXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaG9sZGVyKTtcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3BpeGl1bWRpZ2l0YWwvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYmxvY2tSYWRpby50c1wiKTsiLCJpbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBCbG9ja1JhZGlvIHtcblxuICAgIHN0YXRpYyBydW4obm9kZSwgYmxvY2spe1xuICAgICAgICBsZXQgaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZWxlbWVudC1mb3JtLWNvbnRhaW5lclwiKTtcblxuICAgICAgICBibG9jay5jaG9pY2VzLmZvckVhY2goIChjaG9pY2UpID0+IHtcbiAgICAgICAgICAgIGxldCBmICA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJyYWRpb1wiLFxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiAgYmxvY2submFtZSxcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6ICBjaG9pY2UudmFsdWUrXCJcIlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCBsYWJlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gY2hvaWNlLmxhYmVsO1xuXG4gICAgICAgICAgICBsZXQgX2RpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIF9kaXYuYXBwZW5kQ2hpbGQoZik7XG4gICAgICAgICAgICBfZGl2LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChfZGl2KTtcblxuICAgICAgICAgICAgZi5vbmNsaWNrID0gKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXYudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBibG9jay5hbnN3ZXIgPSAoPEhUTUxJbnB1dEVsZW1lbnQ+ZXYudGFyZ2V0KS52YWx1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICAgICAgfTsgXG4gICAgICAgIH0pO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrQ2hlY2tib3gudHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tDaGVja2JveCB7XG5cbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrKXtcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG5cbiAgICAgICAgYmxvY2suY2hvaWNlcy5mb3JFYWNoKCAoY2hvaWNlKSA9PiB7XG5cbiAgICAgICAgICAgIGxldCBmICA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiAgYmxvY2submFtZSxcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6ICBjaG9pY2UudmFsdWUrXCJcIixcbiAgICAgICAgICAgICAgICBcImlkXCI6ICBjaG9pY2UudmFsdWUrXCJcIixcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL1ByZXNlbGVjdCBhbnN3ZXJzIGlmIHNldFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBibG9jay5hbnN3ZXIubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGlmKChjaG9pY2UudmFsdWUrXCJcIik9PT1ibG9jay5hbnN3ZXJbaV0pe1xuICAgICAgICAgICAgICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMoZiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2VkXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgIGxldCBsYWJlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gY2hvaWNlLmxhYmVsO1xuXG4gICAgICAgICAgICBsZXQgX2RpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIF9kaXYuYXBwZW5kQ2hpbGQoZik7XG4gICAgICAgICAgICBfZGl2LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChfZGl2KTtcblxuICAgICAgICAgICAgZi5vbmNsaWNrID0gKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGNoZWNrZWRCb3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9Y2hlY2tib3hdW25hbWU9XCInK2Jsb2NrLm5hbWUrJ1wiXTpjaGVja2VkJyk7XG4gICAgICAgICAgICAgICAgbGV0IGlkcyA9IFtdO1xuICAgICAgICAgICAgICAgIGNoZWNrZWRCb3hlcy5mb3JFYWNoKCAoZWxlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZHMucHVzaCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZWxlbSkudmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9IGlkcztcbiAgICAgICAgICAgIH07IFxuICAgICAgICB9KTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChob2xkZXIpO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9ja0xvbmd0ZXh0LnRzXCIpOyIsImltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIEJsb2NrTG9uZ3RleHR7XG5cbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrKXtcbiAgICAgICAgXG4gICAgICAgIGxldCBob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJlbGVtZW50LWZvcm0tY29udGFpbmVyXCIpO1xuICAgICAgICBsZXQgZmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XG5cbiAgICAgICAgLy9Bc3NpZ24gZGlmZmVyZW50IGF0dHJpYnV0ZXMgdG8gdGhlIGVsZW1lbnQuIFxuICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMoZmllbGQsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJyb3dzXCI6IDUsXG4gICAgICAgICAgICBcInZhbHVlXCI6IGJsb2NrLmFuc3dlcixcbiAgICAgICAgICAgIFwibmFtZVwiOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBcInN0eWxlXCI6IFwiY29sb3I6UmVkXCJcbiAgICAgICAgfSk7IFxuICAgICAgICAvLyBmaWVsZC5pbm5lckhUTUwgPSBibG9jay5hbnN3ZXI7XG4gICAgICAgIGZpZWxkLm9uYmx1ciA9ICgpID0+IHtcbiAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9ICg8SFRNTFRleHRBcmVhRWxlbWVudD5maWVsZCkudmFsdWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICB9OyBcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGZpZWxkKTsgXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaG9sZGVyKTtcbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==